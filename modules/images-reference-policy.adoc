// Module included in the following assemblies:
//
// * images/managing_images/importing-tag-image-metadata.adoc

[id="images-reference-policy_{context}"]
= Reference Policy

The Reference Policy allows you to specify from where resources that reference this image stream tag pulls the image. It applies to only images that you import from external registries. There are two options to choose from: `Local` and `Source`.

The `Source` policy instructs clients to pull directly from the source registry of the image. The integrated registry is not involved unless the image is managed by the cluster. It is not an external image. This is the default policy.

The `Local` policy instructs clients to always pull from the integrated registry. This is useful if you want to pull from external insecure registries without modifying Docker daemon settings.

This policy only affects the use of the image stream tag. Components or operations that directly reference or pull the image using its external registry location is not redirected to the internal registry.

The pull-through feature of the registry serves the remote image to the client. This feature, which is on by default, must be enabled for the local reference policy to be used. Additionally, by default, all the blobs are mirrored for faster access later.

////
You can set the policy in a specification of image stream tag as `referencePolicy.type`.

.Example of Insecure Tag with a Local Reference Policy

[source,yaml]
----
kind: ImageStream
apiVersion: v1
metadata:
  name: ruby
  tags:
  - from:
      kind: DockerImage
      name: my.repo.com:5000/myimage
    name: mytag
    importPolicy:
      insecure: true <1>
    referencePolicy:
      type: Local <2>
----
<1> Set tag `mytag` to use an insecure connection to that registry.
<2> Set tag `mytag` to use integrated registry for pulling external images. If
the reference policy type is set to `Source`, clients fetch the image
directly from `my.repo.com:5000/myimage`.
////
